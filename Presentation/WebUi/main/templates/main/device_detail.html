{% extends "main/base.html" %}

{% block title %}Device detail{% endblock %}

{% block content %}
    <h3>{{ device.name }}</h3>

    <div class="row">
        <div class="col s12 s4 m4">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">Device status</span>
                    <p>
                    <table>
                        <tbody>
                        <tr>
                            <td>RSSI</td>
                            <td style="text-align:right"><span id="rssi">-</span></td>
                        </tr>
                        <tr>
                            <td>Last echo</td>
                            <td style="text-align:right"><span id="last-echo">-</span></td>
                        </tr>
                        <tr>
                            <td>IP</td>
                            <td style="text-align:right"><span id="ip">-</span></td>
                        </tr>
                        <tr>
                            <td>Voltage</td>
                            <td style="text-align:right"><span id="voltage">-</span></td>
                        </tr>
                        </tbody>
                    </table>
                    </p>
                </div>
                <div class="card-action">
                    <a href="#">More</a>
                </div>
            </div>
        </div>
    </div>

    {% include "main/data_table.html" with rows=values %}

    {% load static %}
    <script type="text/javascript" src="{% static 'main/js/updateDeviceStatus.js' %}"></script>
    <script type="text/javascript">
        $(document).ready(updateDeviceStatus("{% url 'main:telemetry_api' device.id %}"))
    </script>
{% endblock %}